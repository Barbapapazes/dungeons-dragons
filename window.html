<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How this project works | Dungeons &amp; Dragons</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="A 3A students project for INSA's python courses">
    <meta name="theme-color" content="#b33939">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/dungeons-dragons/assets/css/0.styles.4583855b.css" as="style"><link rel="preload" href="/dungeons-dragons/assets/js/app.07c7e759.js" as="script"><link rel="preload" href="/dungeons-dragons/assets/js/2.3dad13ad.js" as="script"><link rel="preload" href="/dungeons-dragons/assets/js/14.cea35aae.js" as="script"><link rel="prefetch" href="/dungeons-dragons/assets/js/10.494ead7d.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/11.93271260.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/12.5bf2eec2.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/13.43adff7e.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/3.fc14c3cf.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/4.bfcd3351.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/5.95d5b6b9.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/6.eafd2c6f.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/7.5352cf87.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/8.81f81a92.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/9.cb82b655.js">
    <link rel="stylesheet" href="/dungeons-dragons/assets/css/0.styles.4583855b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dungeons-dragons/" class="home-link router-link-active"><!----> <span class="site-name">Dungeons &amp; Dragons</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/Barbapapazes/dungeons-dragons" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/Barbapapazes/dungeons-dragons" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dungeons-dragons/presentation.html" class="sidebar-link">Présentation</a></li><li><a href="/dungeons-dragons/config.html" class="sidebar-link">Config</a></li><li><a href="/dungeons-dragons/window.html" aria-current="page" class="active sidebar-link">How this project works</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dungeons-dragons/window.html#core" class="sidebar-link">Core</a></li><li class="sidebar-sub-header"><a href="/dungeons-dragons/window.html#states" class="sidebar-link">States</a></li><li class="sidebar-sub-header"><a href="/dungeons-dragons/window.html#screens" class="sidebar-link">Screens</a></li></ul></li><li><a href="/dungeons-dragons/save_load.html" class="sidebar-link">Gestion de la progression</a></li><li><a href="/dungeons-dragons/game.html" class="sidebar-link">Le Jeu</a></li><li><a href="/dungeons-dragons/shortcuts.html" class="sidebar-link">Raccourcis claviers</a></li><li><a href="/dungeons-dragons/map_editor.html" class="sidebar-link">Map editor</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-this-project-works"><a href="#how-this-project-works" class="header-anchor">#</a> How this project works</h1> <h2 id="core"><a href="#core" class="header-anchor">#</a> Core</h2> <p>The core of the project is inside the file <code>main.py</code> and the file <code>window.py</code> under the class <code>Window</code>.</p> <p>First of all, the main function is <code>main</code> under <code>Window</code>. This function is a loop where the state is run and the screen is updated.</p> <p>These functions are able to manage screens !</p> <h2 id="states"><a href="#states" class="header-anchor">#</a> States</h2> <p>In the <code>main.py</code> file, all the states, which are called screens in this project, are loaded, using the <code>setup_states</code> function. They are classes which inherit from <code>_State</code>.</p> <p>In the <code>Window</code>, there is a function called <code>flip_state</code> which is called every time the screen change. The goal is to load the new state and keep some data from the previous state.</p> <h3 id="operation-of-a-state"><a href="#operation-of-a-state" class="header-anchor">#</a> Operation of a state</h3> <p>The <code>run</code> function from the <code>Window</code> class run the <code>run</code> function from the state. This function call a function depending of the chosen sub-state. For example, the <code>normal_run</code> is the main loop of a classique pygame project, which is often call <code>main</code>. Inside, we can call the <code>update</code>, <code>events</code> and <code>draw</code> functions. The call of this is to have the same design that for a single screen game. Multiple screens is now easy !</p> <h3 id="sub-states"><a href="#sub-states" class="header-anchor">#</a> Sub-states</h3> <p>Each state can have sub-states. This is useful to create sub-menu inside a screen or smooth transition between screens. Because of the function <code>run</code> which choose the correct run function, from the <code>state_dict</code>, each frame, you've just to change the state name to change the loop.</p> <p>If <em>done</em> is set to true, the <code>flip_state</code> function, from the <code>Window</code> class, will load a new state, startup and the <code>global run</code> loop will run the <code>state run</code> loop, which run the sub-state function each frame !</p> <p>Afin de générer les états d'un écran, alors on utilise la fonction <code>make_states_dict</code> de la classe <code>_State</code> pour nous générer un dictionnaire. Ainsi, on peut gérer très facilement ces derniers et switcher entre chaque sans perdre l'état de l'écran.</p> <h2 id="screens"><a href="#screens" class="header-anchor">#</a> Screens</h2> <p>Les écrans sont gérés dans le dossier <code>screens</code> et ils représentent une vue de l'application.</p> <p>Par exemple, on a l'écran de chargement du jeu, celui pour les crédits et même celui pour le jeu. Chacun d'eux est autonome et permet de gérer facilement et efficacement le développement de chacun des vue. En effet, la parallélisation des tâches est extrêmement simple, d'autant plus que la structure est classique avec pygame. Le seul ajout est celui des sub-state pour rester dans le même écran mais en y ajoutant des fonctionnalités.</p> <h3 id="load-game"><a href="#load-game" class="header-anchor">#</a> Load Game</h3> <h4 id="shortcuts"><a href="#shortcuts" class="header-anchor">#</a> Shortcuts</h4> <p><a href="/dungeons-dragons/shortcuts.html#load_game">Pour voir l'ensemble des shortcuts</a></p> <h3 id="menu"><a href="#menu" class="header-anchor">#</a> Menu</h3> <h4 id="shortcuts-2"><a href="#shortcuts-2" class="header-anchor">#</a> Shortcuts</h4> <p><a href="/dungeons-dragons/shortcuts.html#menu">Pour voir l'ensemble des shortcuts</a></p> <h3 id="credit"><a href="#credit" class="header-anchor">#</a> Credit</h3> <h4 id="shortcuts-3"><a href="#shortcuts-3" class="header-anchor">#</a> Shortcuts</h4> <p><a href="/dungeons-dragons/shortcuts.html#shortcuts">Pour voir l'ensemble des shortcuts</a></p> <h3 id="game"><a href="#game" class="header-anchor">#</a> Game</h3> <h3 id="shortcuts-4"><a href="#shortcuts-4" class="header-anchor">#</a> Shortcuts</h3> <p><a href="/dungeons-dragons/shortcuts.html#game">Pour voir l'ensemble des shortcuts</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Barbapapazes/dungeons-dragons/edit/master/docs/window.md" target="_blank" rel="noopener noreferrer">Aidez nous à améliorer cette page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/1/2020, 12:11:35 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dungeons-dragons/config.html" class="prev">
        Config
      </a></span> <span class="next"><a href="/dungeons-dragons/save_load.html">
        Gestion de la progression
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/dungeons-dragons/assets/js/app.07c7e759.js" defer></script><script src="/dungeons-dragons/assets/js/2.3dad13ad.js" defer></script><script src="/dungeons-dragons/assets/js/14.cea35aae.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{369:function(e,t,a){"use strict";a.r(t);var s=a(25),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map"}},[e._v("#")]),e._v(" Map")]),e._v(" "),a("p",[e._v("Nos maps utilisent des fichiers standards "),a("code",[e._v("tmx")]),e._v(". Ce format de fichier permet une lecture aisé des cartes, un ajout important de méta-data et une création facilité des cartes.")]),e._v(" "),a("h2",{attrs:{id:"les-fichiers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#les-fichiers"}},[e._v("#")]),e._v(" Les fichiers")]),e._v(" "),a("h3",{attrs:{id:"creation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creation"}},[e._v("#")]),e._v(" Création")]),e._v(" "),a("p",[e._v("Pour ce projet, nous avons mis en place un map éditor très simple mais tout de même très fonctionnel. Cependant, nous ne sommes pas allé dans les détails de l'outils car nous utilisons "),a("a",{attrs:{href:"https://www.mapeditor.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tiled"),a("OutboundLink")],1),e._v(" pour créer nos cartes. Tiled est un utilitaire, facile d'utilisation qui permet de créer rapidement des cartes au format tmx à partir de tilesheets. Ainsi, c'est grâce à cet outil que nous avons réalisé toutes nos maps.")]),e._v(" "),a("h3",{attrs:{id:"meta-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#meta-data"}},[e._v("#")]),e._v(" Méta-data")]),e._v(" "),a("p",[e._v("Les fichiers "),a("code",[e._v("tmx")]),e._v(" sont des fichiers "),a("code",[e._v("xml")]),e._v(" avec une architecture spécifique pour les cartes. L'intérêt de ce type de fichiers, à l'inverse d'un fichier text, est qu'il permet de stocker et d'organiser très simplement nos données. Ainsi, avec ce type de fichiers, nous avons accès à plusieurs layers sur une carte et nous pouvons y ajouter un système d'objet directement dans la carte. Lors de la lecture de cette dernière par le jeu, nous pouvons instancier le bon élément en utilisant le nom et la position de l'objet. C'est donc très pratique.")]),e._v(" "),a("p",[e._v("Le meilleur exemple est la gestion des items.")]),e._v(" "),a("h4",{attrs:{id:"gestion-des-items-sur-la-carte"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gestion-des-items-sur-la-carte"}},[e._v("#")]),e._v(" Gestion des items sur la carte")]),e._v(" "),a("p",[e._v("Afin de créer un item sur la carte, il suffit de créer un objet, dans un tag objectgroup, dont le nom est la clé du dictionnaire de l'élément voulu dans "),a("code",[e._v("sprites.py")]),e._v(".")]),e._v(" "),a("p",[e._v("Ainsi, en ajoutant :")]),e._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("object")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("bronze_key_small"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("x")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("336"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("y")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("400"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("width")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("height")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("/>")])]),e._v("\n")])])]),a("p",[e._v("On va pouvoir créer une clé en bronze à la position 336, 400 sur la carte.")]),e._v(" "),a("h2",{attrs:{id:"map-editor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map-editor"}},[e._v("#")]),e._v(" Map editor")]),e._v(" "),a("p",[e._v("This map editor is used to create or edit a map for the game. It uses a GUI to facilitate the process of map creation. This tool is not inside the game which is different process. But we recommended to close the game when update a map for a better experience.")]),e._v(" "),a("h3",{attrs:{id:"start-the-map-editor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-the-map-editor"}},[e._v("#")]),e._v(" Start the map editor")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# start the map editor")]),e._v("\n$ pipenv run map_editor\n")])])]),a("h3",{attrs:{id:"shortcuts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shortcuts"}},[e._v("#")]),e._v(" Shortcuts")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("CTRL + K")]),e._v(": show all shortcuts")])]),e._v(" "),a("h4",{attrs:{id:"in-the-tileset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-the-tileset"}},[e._v("#")]),e._v(" In the tileset")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Left Click")]),e._v(": select a tile")]),e._v(" "),a("li",[a("strong",[e._v("ZQSD or Scroll Wheel")]),e._v(": move the tileset")])]),e._v(" "),a("h4",{attrs:{id:"in-the-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-the-map"}},[e._v("#")]),e._v(" In the map")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("IJKL")]),e._v(": move the map in the viewport")]),e._v(" "),a("li",[a("strong",[e._v("Number")]),e._v(": select a layer")]),e._v(" "),a("li",[a("strong",[e._v("Left Click")]),e._v(": add a tile to the selected layer, drag to add many tiles")]),e._v(" "),a("li",[a("strong",[e._v("Right Click")]),e._v(": remove a tile from the selected layer, drag to remove many tiles")]),e._v(" "),a("li",[a("strong",[e._v("ALT + Left Click")]),e._v(" (drag to draw): create a wall")]),e._v(" "),a("li",[a("strong",[e._v("ALT + Right Click")]),e._v(" (inside a rect): remove a wall or a player")]),e._v(" "),a("li",[a("strong",[e._v("CTRL + R")]),e._v(": remove the selected tile")]),e._v(" "),a("li",[a("strong",[e._v("CTRL + S")]),e._v(": save the map")])]),e._v(" "),a("h4",{attrs:{id:"tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tools"}},[e._v("#")]),e._v(" Tools")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("Paint Pot")]),e._v(" (red square): select a layer, a tile and then click on the paint pot")]),e._v(" "),a("li",[a("strong",[e._v("Rubber")]),e._v(" (yellow square): remove all tile from the selected layer")]),e._v(" "),a("li",[a("strong",[e._v("Player")]),e._v(" (green square): create a player object")])]),e._v(" "),a("h3",{attrs:{id:"about-tiled"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about-tiled"}},[e._v("#")]),e._v(" About Tiled")]),e._v(" "),a("p",[e._v("Because our game support the standard "),a("code",[e._v(".tmx")]),e._v(" files for saving map data, you can use "),a("a",{attrs:{href:"https://www.mapeditor.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tiled"),a("OutboundLink")],1),e._v(" for a better experience.")]),e._v(" "),a("h2",{attrs:{id:"map-random"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map-random"}},[e._v("#")]),e._v(" Map random")]),e._v(" "),a("p",[e._v("Pour générer des maps de façon aléatoire, il a été créé des presets de carte 8x8 avec des tuiles de 64px dans "),a("code",[e._v("/assets/map_random/preset/")]),e._v(". Ainsi, il suffit de faire appel à la fonction "),a("code",[e._v("generated_map")]),e._v(" dans le fichier "),a("code",[e._v("/utils/random_map.py")]),e._v(" pour générer une map. Elle prend comme paramètre sa taille ,"),a("code",[e._v("width")]),e._v(", "),a("code",[e._v("height")]),e._v(" et "),a("code",[e._v("out")]),e._v(" qui par défaut à sa valeur est "),a("code",[e._v("../map_generated.tmx")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"fonctions-utiles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fonctions-utiles"}},[e._v("#")]),e._v(" Fonctions utiles")]),e._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("def")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("out_xml")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" data_Ground"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" data_Wall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" data_Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("pass")]),e._v("\n")])])]),a("p",[e._v("Cette fonction permet d'écrire un fichier "),a("code",[e._v(".tmx")]),e._v(" en prenant en compte la taille de la map , la sortie (le fichier), et les différentes layers codée en "),a("code",[e._v("csv")]),e._v(".")]),e._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("def")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("fusion_two_map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("map1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" map2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" direction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("pass")]),e._v("\n")])])]),a("p",[e._v("Elle permet de fusionner deux map existantes, de préférences de même taille car la fonction ne fait pas de remplissage si une des carte est plus grande.")]),e._v(" "),a("h3",{attrs:{id:"rangement-des-presets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rangement-des-presets"}},[e._v("#")]),e._v(" Rangement des presets")]),e._v(" "),a("p",[e._v("Chaque lettre sur le dossier ou le nom du preset.tmx à sa signification et voici son dictionnaire:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("S (Start) : Il s'agit des presets par lesquels les joueur peuvent commencer une nouvelle partie.")])]),e._v(" "),a("li",[a("p",[e._v("T (Top) : Les presets avec une ouverture vers le haut.")])]),e._v(" "),a("li",[a("p",[e._v("R (Right) : Les presets avec une ouverture vers la droite")])]),e._v(" "),a("li",[a("p",[e._v("D (Down) : Les presets avec une ouverture vers le bas")])]),e._v(" "),a("li",[a("p",[e._v("L (Left) : Les presets avec une ouverture vers la gauche")])]),e._v(" "),a("li",[a("p",[e._v("d (door) : Les presets contenant une porte")])]),e._v(" "),a("li",[a("p",[e._v("C (Chest) : Les presets contenant un coffre")])]),e._v(" "),a("li",[a("p",[e._v("M (merchant) : Les presets contenant un marchant")])]),e._v(" "),a("li",[a("p",[e._v("F (Fire camp) : Les presets contenant un feu de camp pour la Sauvegarde")])]),e._v(" "),a("li",[a("p",[e._v("P (Private room or way) : Les presets contenant un passage secret ou c'est la piece qui a des entré secrete")])]),e._v(" "),a("li",[a("p",[e._v("B (Boss) : Les presets contenant un boss")])]),e._v(" "),a("li",[a("p",[e._v("E (enemy) : Les presets contenant des enemies de type squelette ou goblin. La lettre E est suivi d'un nombre désignant")])])]),e._v(" "),a("h3",{attrs:{id:"fichier-genere"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fichier-genere"}},[e._v("#")]),e._v(" Fichier généré")]),e._v(" "),a("h4",{attrs:{id:"les-layers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#les-layers"}},[e._v("#")]),e._v(" Les layers")]),e._v(" "),a("p",[e._v("Il y a 3 layers :")]),e._v(" "),a("ul",[a("li",[e._v("le "),a("code",[e._v("ground")]),e._v(" pour l'image du sol")]),e._v(" "),a("li",[e._v("le "),a("code",[e._v("wall")]),e._v(" pour l'image des murs")]),e._v(" "),a("li",[e._v("l'"),a("code",[e._v("obstacles")]),e._v(" pour tous les objets de différents types (ex: wall,Goblin,chest,health_potion)")])]),e._v(" "),a("p",[e._v("Le jeu de tuiles utilisé pour faire les presets de map se trouve dans "),a("code",[e._v("/assets/img/tile_dungeons.png")]),e._v(". C'est donc ce dernier qui va permettre de générer l'intégralité de la carte.")])])}),[],!1,null,null,null);t.default=r.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Déroulement d&#39;un combat | Dungeons &amp; Dragons</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="A 3A students project for INSA's python courses">
    <meta name="theme-color" content="#b33939">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/dungeons-dragons/assets/css/0.styles.b1a5f4e5.css" as="style"><link rel="preload" href="/dungeons-dragons/assets/js/app.f33abbbd.js" as="script"><link rel="preload" href="/dungeons-dragons/assets/js/2.7be5450c.js" as="script"><link rel="preload" href="/dungeons-dragons/assets/js/17.4aa2b1b0.js" as="script"><link rel="prefetch" href="/dungeons-dragons/assets/js/10.dfbe93f3.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/11.d7f44782.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/12.4b29d2f8.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/13.1b9d290d.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/14.105b03bd.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/15.0f3a3245.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/16.189c3efc.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/18.8f8b6cd3.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/19.bb3a1168.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/20.cbc72917.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/21.9474a9fb.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/22.dcb7578c.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/23.bcf4a487.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/24.f3cb97b2.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/25.79c2e7c7.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/26.7da21071.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/3.7b11ce80.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/4.5065ab04.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/5.b5900fc2.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/6.d0c7dcdc.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/7.6a17c7aa.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/8.95e3a4ab.js"><link rel="prefetch" href="/dungeons-dragons/assets/js/9.a3303efc.js">
    <link rel="stylesheet" href="/dungeons-dragons/assets/css/0.styles.b1a5f4e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dungeons-dragons/" class="home-link router-link-active"><!----> <span class="site-name">Dungeons &amp; Dragons</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dungeons-dragons/guides/" class="nav-link router-link-active">
  Guides
</a></div> <a href="https://github.com/Barbapapazes/dungeons-dragons" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dungeons-dragons/guides/" class="nav-link router-link-active">
  Guides
</a></div> <a href="https://github.com/Barbapapazes/dungeons-dragons" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dungeons-dragons/guides/" aria-current="page" class="sidebar-link">Guides</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide du joueur</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guide du développeur</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dungeons-dragons/guides/dev/" aria-current="page" class="sidebar-link">Présentation</a></li><li><a href="/dungeons-dragons/guides/dev/config.html" class="sidebar-link">Config</a></li><li><a href="/dungeons-dragons/guides/dev/logger.html" class="sidebar-link">Logger</a></li><li><a href="/dungeons-dragons/guides/dev/window.html" class="sidebar-link">Fonctionnement global</a></li><li><a href="/dungeons-dragons/guides/dev/versus.html" aria-current="page" class="active sidebar-link">Déroulement d'un combat</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dungeons-dragons/guides/dev/versus.html#initialisation" class="sidebar-link">Initialisation</a></li><li class="sidebar-sub-header"><a href="/dungeons-dragons/guides/dev/versus.html#phase-d-un-joueur" class="sidebar-link">Phase d'un joueur</a></li><li class="sidebar-sub-header"><a href="/dungeons-dragons/guides/dev/versus.html#phase-des-ennemis" class="sidebar-link">Phase des ennemis</a></li></ul></li><li><a href="/dungeons-dragons/guides/dev/managers.html" class="sidebar-link">Managers</a></li><li><a href="/dungeons-dragons/guides/dev/map.html" class="sidebar-link">Map</a></li><li><a href="/dungeons-dragons/guides/dev/save_load.html" class="sidebar-link">Gestion de la progression</a></li><li><a href="/dungeons-dragons/guides/dev/shortcuts.html" class="sidebar-link">Raccourcis claviers</a></li><li><a href="/dungeons-dragons/guides/dev/music.html" class="sidebar-link">Musique</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deroulement-d-un-combat"><a href="#deroulement-d-un-combat" class="header-anchor">#</a> Déroulement d'un combat</h1> <blockquote><p>L'ensemble des configurations se trouve dans <code>config\versus.py</code></p></blockquote> <h2 id="initialisation"><a href="#initialisation" class="header-anchor">#</a> Initialisation</h2> <p>On considère que un personnage de class Voleur aura toujours l'initiative et commencera donc le combat. Pour ce qui concerne les autres entités personnage/ennemi, on effectue un jet sur l'attribut <code>DEX</code> (Dexterity). Ceux qui réussissent le mieux leur test passent devant.</p> <h2 id="phase-d-un-joueur"><a href="#phase-d-un-joueur" class="header-anchor">#</a> Phase d'un joueur</h2> <p>Chaque joueur dispose d'un certain nombre d'action (définie par <code>numberOfAction</code>) . Ce dernier dispose de 2 action basic qui sont Attack et Move et s'il est Mage, il dispose d'une capacité supplémentaire qui est Sort. Il est intéressant de noter que chaque action du joueur réduit de 1 son nombre d'action pour le tour.</p> <h3 id="attaquer"><a href="#attaquer" class="header-anchor">#</a> Attaquer</h3> <p>Tout abord s'il le joueur n'as pas d'arme , on considère qu'il tape à main nue et que ce dernier a une distance <code>TOUCH_HAND</code> de rayon et fait des dégâts de <code>DMG_ANY_WEAPON</code>.</p> <p>Il peut avoir une arme sélectionnée, qui peut être distinguée par 2 types : <code>sword</code> et <code>arc</code>.</p> <p>Avec le type <code>sword</code>, un cercle se dessine autour du player définissant la porté de l'arme, puis nous devons sélectionner un ennemi. Si ce dernier se trouve hors de portée, dommage une action est consommé. Mais si l'ennemie se trouve à portée, un lancer de <code>STR</code> est effectué pour determiné s'il l'attaque touche.</p> <p>Avec le type <code>arc</code>, on considère que l'on peut tirer de n'importe où mais un malus proportionnel à la distance s'applique sur le lancer de <code>DEX</code></p> <div class="language-py extra-class"><pre class="language-py"><code>dist <span class="token operator">=</span> self<span class="token punctuation">.</span>distance<span class="token punctuation">(</span>player<span class="token punctuation">,</span> self<span class="token punctuation">.</span>selectEnemy<span class="token punctuation">)</span>
scope <span class="token operator">=</span> player<span class="token punctuation">.</span>weapon<span class="token punctuation">.</span>scope
<span class="token keyword">if</span> scope <span class="token operator">&lt;</span> dist<span class="token punctuation">:</span>
    malus <span class="token operator">=</span> <span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dist <span class="token operator">-</span> scope<span class="token punctuation">)</span> <span class="token operator">//</span> TILESIZE<span class="token punctuation">)</span> <span class="token operator">*</span> MALUS_ARC
</code></pre></div><h3 id="se-deplacer"><a href="#se-deplacer" class="header-anchor">#</a> Se déplacer</h3> <p>Créer un cercle de rayon <code>DISTANCE_MOVE</code> puis on sélectionne une position dans le cercle. Le personnage se déplace automatique grace à la fonction de pathfinding.</p> <h3 id="lancer-un-sort"><a href="#lancer-un-sort" class="header-anchor">#</a> Lancer un sort</h3> <p>Chaque utilisation de sort a un coût en mana, et chaque sort pose au sol une zone d'effet qui rend des point de vie pour les sort de type <code>heal</code> et les autres des dégâts.</p> <p>Un même sort peut appliquer des zones qui ont une valeur d'action différente (heal/dommage) car le sort fait comme les armes et possède une caractéristique xdz (x dé de valeur z)</p> <h2 id="phase-des-ennemis"><a href="#phase-des-ennemis" class="header-anchor">#</a> Phase des ennemis</h2> <h3 id="decision"><a href="#decision" class="header-anchor">#</a> Décision</h3> <p>En combat, les ennemis fuient systématiquement si ils leur restent peu de vie. Sinon, si les ennemis sont à portée (<code>attack_range</code>) d'un joueur, ils vont attaquer, sinon ils vont se déplacer vers ce joueur.</p> <h3 id="deplacement"><a href="#deplacement" class="header-anchor">#</a> Déplacement</h3> <p>Les ennemis vont suivre le chemin le plus court trouvé par l'algorithme de pathfinding A* vers le joueur en vue et suivre ce chemin de manière presque linéaire avec une vitesse <code>speed</code>.</p> <h3 id="attaque"><a href="#attaque" class="header-anchor">#</a> Attaque</h3> <p>Les ennemis utilisent leur pouvoir spécial s'ils en possèdent un et qu'il s'est écoulé un certain nombre de tour depuis le début du combat ou la dernière fois qu'ils l'ont utilisé (<code>cooldown</code>). Sinon, une attaque simple va être lancée commme pour un joueur.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Barbapapazes/dungeons-dragons/edit/master/docs/guides/dev/versus.md" target="_blank" rel="noopener noreferrer">Aidez nous à améliorer cette page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/27/2021, 1:09:17 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dungeons-dragons/guides/dev/window.html" class="prev">
        Fonctionnement global
      </a></span> <span class="next"><a href="/dungeons-dragons/guides/dev/managers.html">
        Managers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/dungeons-dragons/assets/js/app.f33abbbd.js" defer></script><script src="/dungeons-dragons/assets/js/2.7be5450c.js" defer></script><script src="/dungeons-dragons/assets/js/17.4aa2b1b0.js" defer></script>
  </body>
</html>
